## 클라우드 서비스

- 이전에는 NAC장비를 이용해서 개인서버를 운용한다던가, pc나 노트북을 이용해서 개인 서버를 운용하는 사람들도 있었습니다.
- 하지만 직접 서버를 운용하는 것은 매우 난이도가 있는 일이고 관리해야할 사항이 많습니다.
- 클라우드 서비스를 이용하면 서버, db, 리소스 등 여러가지 관리대상을 일목요연하게 모니터링하고 다양한 서비스를 결합해 원하는 서비스를 운용할 수 있습니다.

### 용어
- idc : Internet Data Center
- 서버 호스팅 : 서버를 가지고 있는 회사에 서버를 빌려서 사용함.
- 가상 서버 : 가상 머신(VM ware, Virtual box) 기술들이 발명되면서 등장 가상 머신을 이용해서 서버를 생성한 기술입니다.

### 역사

- 가상 서버기술을 이용해서 가상 서버를 대여해주는 사업이 등장했고, 클라우드라는 개념이 생기고 아마존이 등장했습니다. (클라우드 개념은 google에서 만들었음)

- 클라우드 서비스란 원격의 컴퓨터 리소스를 빌리는 것입니다. 
- 클라우드 서비스를 지원한는 업체에서 수많은 서버를 구축(idc)해두고, 거기에 가상머신으로 가상 서버를 설정해서 임대하는 서비스입니다.

### 종류
- 메이저: AWS, Azure, GCP(구글 클라우드), IBM cloud, 오라클, 네이버클라우드
- 혼자서 소규모로 할 때에는 Digital Ocean, Vultr, Linode 이런 중소형 서비스도 고려할만한 대상이 됩니다.

- chat gpt api는 weniv에서 제공한건데.. **cloud flare** 도 고려해볼 만한 옵션

### AWS의 기본 개념 및 이해

AWS는 다음과 같은 주요 개념과 용어를 갖고 있습니다:

1. 리전 (Region): 
  AWS는 전 세계에 여러 개의 리전을 운영합니다. 
  각 리전은 독립된 데이터 센터 그룹으로 구성되어 있으며, 특정 지리적 위치에 배치되어 있습니다. 예를 들어, 미국 동부, 유럽, 아시아 태평양 등이 리전의 예입니다.

2. 가용 영역 (Availability Zone): 
  리전은 하나 이상의 가용 영역으로 구성됩니다. 가용 영역은 독립된 데이터 센터로 구성되어 있으며, 고가용성과 내결함성을 제공하기 위해 상호 연결됩니다.

3. 인스턴스 (Instance): 
  가상 컴퓨팅 환경을 의미하며, AWS에서는 Amazon Elastic Compute Cloud (EC2)를 통해 인스턴스를 제공합니다. 인스턴스는 가상 서버로, 다양한 운영 체제와 애플리케이션을 실행할 수 있습니다.

4. S3 (Simple Storage Service): 
  S3는 객체 스토리지 서비스로, 파일이나 데이터를 안전하게 저장하고 검색할 수 있습니다. 이는 웹 사이트 호스팅, 백업 및 복구, 데이터 아카이브 등에 사용됩니다.
  가상화 서버는 쉽게 생성/삭제가 되다 보니까 보다 안전하게 정보를 저장할 서비스가 필요했고, 그것이 바로 S3으로 구현되었습니다.

5. RDS (Relational Database Service): 
  RDS는 관계형 데이터베이스 서비스로, MySQL, PostgreSQL, Oracle, SQL Server 등 다양한 데이터베이스 엔진을 제공합니다. 사용자는 서버 관리 없이 데이터베이스를 쉽게 설정, 운영 및 확장할 수 있습니다.
  
6. Lambda: 
  Lambda는 서버리스 컴퓨팅 서비스로, 코드를 실행할 수 있는 컴퓨팅 리소스를 제공합니다. 사용자는 코드를 업로드하고 이벤트에 대한 응답으로 실행될 수 있도록 구성할 수 있습니다. 어떤 이벤트가 발생했을 때, 코드 기반를 잠깐 실행할 수 있는 리소스를 빌렸다가 사용 후 바로 반납합니다.

7. VPC (Virtual Private Cloud): 
  VPC는 가상 사설 네트워크로, 사용자의 AWS 리소스를 구성하고 격리된 네트워크 환경을 생성할 수 있습니다. (공인ip, 사설ip)
  

## AWS 주요 서비스

- 참조 사이트 : https://www.hanl.tech/blog/helpful-9-amazon-web-services-for-developers/

1. 컴퓨팅
  - Amazon EC2 (Elastic Compute Cloud)
    - 가상 서버를 제공합니다.
    - 애플리케이션을 호스팅하고, 서버의 운영 체제와 애플리케이션 실행 환경을 완전히 제어할 수 있습니다.
    - **EC2는 더 많은 제어력과 사용자 정의 가능성이 필요한 경우 유용**

  - AWS Lambda
    - 서버리스 컴퓨팅을 가능하게 합니다.
    - 이는 애플리케이션을 실행하는 데 필요한 서버의 프로비저닝이나 관리를 걱정할 필요 없이 코드를 실행할 수 있다는 의미입니다.
    - 사용자는 간단하게 코드를 작성하고 Lambda에 업로드만 하면 Lambda는 코드를 자동으로 실행하며, 사용자가 요청한 대로 컴퓨팅 리소스를 할당하고 조정합니다.
    - **Lambda는 서버 관리를 최소화하고 빠르게 확장할 필요가 있는 경우에 이상적**

2. 스토리지
  - Amazon S3 (Simple Storage Service)
    - 개발자에게 웹에서 데이터를 저장하고 검색하는 데 필요한 모든 기능을 제공합니다.
    - 확장성, 데이터 가용성, 보안 및 성능이 뛰어납니다.

  - Amazon EBS (Elastic Block Store)
    - EC2 인스턴스에 사용할 수 있는 블록 스토리지 시스템입니다.
    - 한 번에 한 개의 인스턴스에 연결할 수 있습니다.
    - 데이터베이스 워크로드 같은 트랜잭션 인텐시브 워크로드에 적합하며, 빠른 접근 속도와 낮은 지연 시간을 요구하는 애플리케이션에 특히 유용

  - Amazon Glacier 
    - 장기간 및 저렴한 비용의 데이터 아카이빙을 목적으로 설계된 스토리지 서비스입니다.
    - S3에 비애 요금이 많이 저렴하고 속도가 느림. 그래서 백업 용도로 많이 사용합니다.

3. 데이터베이스
  - Amazon RDS
    - 관계형 데이터베이스를 쉽게 설정, 운영 및 확장할 수 있는 웹 서비스입니다. 
    - MySQL, PostgreSQL, MariaDB, Oracle, SQL Server, Aurora
    - 자동 백업, 데이터베이스 스냅샷, 자동 호스트 교체, 복제를 통한 읽기 트래픽 증가 등의 기능을 제공하여 데이터베이스의 내구성과 가용성을 높입니다.

  - Amazon DynamoDB
    - 서버리스 NoSQL 데이터베이스 서비스로, 마이크로초 단위의 지연 시간으로 모든 규모의 애플리케이션에서 고성능 읽기 및 쓰기 작업을 제공합니다.
    - DynamoDB는 엄격한 일관성을 보장하며, 초당 수백만 개의 요청을 처리할 수 있습니다. 또한 이 서비스는 데이터를 자동으로 3개의 가용 영역에 복제하여 높은 가용성과 내구성을 제공합니다.

4. 네트워킹 & 콘텐츠 전송 (예: VPC, Route 53)
  - Amazon Virtual Private Cloud (VPC)
    - AWS 클라우드에서 논리적으로 격리된 공간을 정의하고 사용할 수 있게 해주는 서비스입니다.
    - VPC를 통해 사용자는 IP 주소 범위를 선택하고, 서브넷을 생성하고, 라우팅 테이블과 네트워크 게이트웨이를 구성할 수 있습니다.

  - Amazon Route 53 
    - 이는 확장성이 높고 비용 효율적인 도메인 이름 시스템(DNS) 웹 서비스입니다.
    - Route 53은 또한 AWS 서비스와의 효율적인 통합을 통해 개발자가 AWS 리소스를 손쉽게 라우팅할 수 있게 해줍니다.

5. 개발자 도구 (예: CodeStar, Cloud9)
  - AWS CodeStar
    - AWS에서 애플리케이션을 빠르게 개발, 빌드 및 배포할 수 있도록 도와주는 서비스입니다.
    - 다양한 프로그래밍 언어와 프레임워크, AWS 서비스를 지원하며, 빠른 세팅을 통해 시간을 절약할 수 있습니다.

  - AWS Cloud9
    - 웹 브라우저를 통해 코드를 작성, 실행, 디버깅할 수 있는 클라우드 기반의 통합 개발 환경(IDE)입니다.

  - AWS는 아니지만 추천
    - github code space

6. 관리 및 관리자 도구
  - AWS CloudWatch : 알림을 발생 시키는것까지..
    - 대시보드: 사용자는 CloudWatch 대시보드를 사용하여 AWS 리소스의 성능과 운영 상태를 시각적으로 모니터링할 수 있습니다.
    - 로그: 로그 파일을 수집하고 저장하여 특정 시스템이나 애플리케이션의 작동 방식을 분석할 수 있습니다.
    - 이벤트: AWS 리소스의 상태 변경을 자동으로 응답하도록 설정할 수 있습니다.
    - 알람: 특정 지표가 설정한 임계치를 초과하면 알람을 발생시킵니다. 이를 통해 빠른 대응이 가능해집니다.

  - AWS CloudFormation : 
    - 스택 관리: CloudFormation을 사용하면, 관련 AWS 리소스 그룹 (스택)을 한 번에 생성, 업데이트, 삭제할 수 있습니다. 이를 통해 리소스의 일관성과 관리 편의성이 향상됩니다.
    - 템플릿: AWS 리소스를 코드로서 관리할 수 있도록 템플릿을 제공합니다. 이를 통해 인프라 구조를 버전 관리하고 재사용할 수 있습니다.
    - 변경 세트: 변경 세트를 사용하면 스택 변경을 미리 미리 보고 이해할 수 있습니다. 이는 실수를 줄이는 데 도움이 됩니다.

## AWS 요금 구조

- 개인 프로젝트에서는 크게 영향이 없을 수 있지만, 회사다니면서는 필수적으로 챙겨야하는 부분입니다.

1. 페이-애즈-유-고(Pay-As-You-Go)
  - 고정 비용이나 예비 비용이 없으며, 필요한 서비스를 원하는 만큼 사용할 수 있게 해줍니다.
  - 사용하지 않는 서비스에 대한 비용을 줄일 수 있게 돕습니다.

2. 온디맨드(On-Demand)
  - 사용자가 필요한 시간동안 서비스를 이용하고 비용을 지불합니다. 이 방식은 장기적인 약정이나 upfront payment가 필요하지 않습니다.
  - 웹사이트의 트래픽이 일정하지 않은 스타트업, 개발 및 테스트 환경 등에서 사용됩니다.

3. 저축 계획(Savings Plans)
  - 일정 기간 동안 특정 용량의 AWS 리소스 사용을 약속하는 대신, 저렴한 요금을 제공하는 "저축 계획"을 제공합니다. (월별, 연간 또는 3년 단위)
  - 꾸준히 AWS 서비스를 사용할 예정이라는 것을 알고 있는 경우에 적합합니다

4. 리저브드 인스턴스(Reserved Instances)
  - 특정 기간 동안 사용할 AWS 서비스(메모리, 용량 등)를 사전에 예약하면, 대폭 할인된 비용을 제공합니다. 이는 보통 1년 또는 3년 단위로 제공됩니다.
  - 예측 가능한 워크로드를 가진 경우에 적합합니다.

5. 스팟 인스턴스(Spot Instances)
  - AWS의 미사용 서버 용량을 입찰 방식으로 구매하는 방식입니다. 
  - 24시간 서비스 말고 배치 작업, 백업작업, 잠깐 쓰는 용도로 쓰면 굉장히 저렴하게 사용할 수 있다.


## MFA 반드시 등록하기

- MFA 는 multi factor authencication
- 사용자가 적어도 두 가지 이상의 확인 요소로 인증하는 것입니다.
- 아이디-패스워드 이외에 다른 인증 절차를 추가한것을 의미합니다.

- OTP와 비슷합니다.
- 저는 `Authy` 라는 앱을 사용했습니다.



### EC2 생성하고 접속해보기

- EC2 를 생성하고 인스턴스를 눌러서 접속해봅니다.

- 연결 들어가면 '인스턴스연결' 있는데 이건 별도 프로그램 없이 웹에서 서버에 접속할 수 있게 해주는 서비스입니다.
- 접속하면 터미널 창이 나오는데 이게 서버에 접속된 것입니다.
- 아래쪽에 인스턴스 id와 함께 ip2개가 나오는데,
  - PublicIPs: 13.125.193.165    PrivateIPs: 172.31.8.254
- 이렇게 나오는데 이게 이 서버의 공인ip와 사설 ip입니다.

pwd : 현재경로
cat /etc/issue : Ubuntu 22.04.2 LTS \n \l 출력됨.

- 이후 수업에서는 SSH로 접속해서 사용할 것입니다.
- 대부분 linux는 ssh서버가 돌아가고 있는데, 일너 점을 이용해서 ssh client를 이용해서 서버에 접속하도록 하겠습니다.


## 공인ip, 사설ip


- ip: 인터넷에 연결된 각 기기를 구분하기 위해 사용되는 고유한 주소를 말합니다. 

- 공인 IP는 전 세계적으로 유일하게 할당되며, 이는 인터넷 상에서 고유한 아이덴티티를 부여하여 특정 기기와 통신을 가능하게 합니다.

- 사설 IP는 로컬 네트워크 내에서만 사용될 수 있는 주소입니다. 이 주소는 전 세계적으로 유일할 필요가 없으며, 로컬 네트워크 내에서만 유일하면 됩니다.

1. **공인 IP는 아파트 단지의 주소**와 같습니다. 이 주소는 전국 어디에서나 그 위치를 찾을 수 있도록 도와주며, 택배가 올 때나 방문객이 찾아올 때 아파트 단지를 찾을 수 있는 유일한 정보입니다.

2. 반면에, **사설 IP는 아파트 단지 안의 개별 아파트 호수**와 같습니다. 이 호수는 아파트 단지 내에서만 의미가 있으며, 단지 밖에서는 그 위치를 알 수 없습니다. 그러나 한번 아파트 단지 내에 들어오면, 각 아파트 호수를 통해 특정 집을 찾아갈 수 있습니다.

- 공인 IP를 사용하는 것이 필요한 예로는 웹 서버나 이메일 서버와 같은 인터넷에 직접 연결되어야 하는 서버, 또는 원격에서 접근이 필요한 기기 등이 있습니다. 
- 하지만 공인 IP 주소는 한정된 자원이기 때문에, 모든 기기가 공인 IP를 가질 수는 없습니다.

- 사설 IP 대역
  - 클래스 A: 10.0.0.0~10.255.255.255
  - 클래스 B: 172.16.0.0~172.31.255.255
  - 클래스 C: 192.168.0.0~192.168.255.255

- 공인ip (퍼블릭ipv4 주소) :
서버를 껏다 키면 변경됩니다. 고정된 주소가 아닙니다.

### SSH Client 설치 및 접속 설정

- Tabby, putty, xshell?, iterm2 등등있음. 개인취향
- 수업에서는 Tabby 사용하겠읍니다.

- aws에서 서버 생성 시 다운받은 .pem 파일을 홈디렉토리의 .ssh 폴더 안에다가 복사합니다. (사실상관없는거같기도하고....)

- ssh연결로 프로필 생성
  - 공인ip주소 입력
  - ubuntu os 특징인거같은데, 사용자이름은 ubuntu로 
  - key 파일등록 하면 연결할 수 있습니다.


# LightSail

- 저렴하고 간편하게 서버, db, 네트워크 등을 작업할 수 있는 AWS 서비스입니다.

## 인스턴스 생성하기

- 인스턴스 생성하기 버튼을 누르고 원하는 세팅을 선택합니다.

- 해당 인스턴스에 대한 SSH key 를 추가하고 다운로드 받은 후, 잘 관리합니다. (한 번만 다운로드 받을 수 있음. SSH 연결에 필요함)



### Linux에 Wordpress 사용해서 만들어보기


### 버스트?
- 인스턴스 생성 후 `지표` 탭에 가면 사용한 리소스 지표들을 확인할 수 있습니다.

- 버스트 용량 제한. 0%되는순간 추가 과금
- 버스트는 10% 이상일때 소모됨


### 접속하기

- 공개ip 입력해서 접속. 근데 https 말고http로해야함
  - http://공개아이피
  - 관리자 페이지는 ~~/wp-admin

- 관리자 아이디 비밀번호 지정한적 없기 때문에 확인필요
  - 인스턴스 가서 `SSH를 사용하여연결` 을 클릭하고 ls로 확인해봅시다.
  - bitnami_credentials 파일에 저장되어있으니까 열어서 확인
  - user / IbZw6fJIinE!

- 리눅스 버전확인 `/etc/issue`?

- Tabby로 ssh 연결..
  - 홈디렉토리에서 /stack/wordpress
  - 경로에 워드프레스 관련 파일들 있음

- 중지하거나 재부팅하면.. public ip가 꼐속 바뀜. ㅠㅠ
  - public ip를 고정할 수 있음.
  - 네트워킹 메뉴에 고정 IP연결 버튼이 있음.
  - IP를 고정적으로 할당받고 이 IP에 내 인스턴스를 연결하는 개념.
  - 다른 인스턴스를 연결할 수 있습니다.
  - 고정ip는 추가 요금 없이 5개까지 가능합니다.


### LAMP 로 GNU보드
- linux apache mysql php 설정한거 > LAMP 라고 합니다.

- gnuboard
  - k-게시판
  - 500만원 이하 홈페이지를 만드는 웹 에이전시들에서 압도적인 점유율
  - 홈페이지도 만들 수 있음

- 홈 디렉토리에 /htdocs 경로에 index.html
- bitnami_credentials 에 비밀번호 있음 (9Kwkw2soH4f=)

- 기본 설치되어있는 mysql 접속하기
  - mysql -u root -p
  - 비밀번호는 위에서 확인한 것 넣기


## 도메인

- ip는 사람이 이해하고 기억하기 어렵기 때문에 이를 위해서 각 ip에 이름을 부여할 수 있게 했는데, 이것을 도메인이라고 한다.
- 즉, 도메인은 장치를 식별하기 위한 주소

- 컴퓨터의 이름과 최상위 도메인으로 구성되어 있다. 예를들면 아래와 같다.
  - naver : 컴퓨터 이름
  - com : 최상위 도메인


- DNS라고 알려진 도메인 이름 시스템은 브라우저에 입력된 도메인 이름을 컴퓨터가 읽을 수 있는 IP로 변환합니다. 
- 해당 시스템은 ICANN에서 감독하고 있으며, 번호를 찾기 위해 이름을 찾는 매우 두꺼운 옛날 전화번호부 책과 흔히 비교되곤 합니다.


### 도메인 구성요소
1. 도메인 네임 스페이스(Domain Name Space)
  - 최상위에 루트 DNS 서버가 존재하고 , 그 하위로 인터넷에 연결된 모든 노드가 연속해서 이어진 계층구조로 구성
2. 네임서버(Name Server)
  - 주소를 변환 시키기 위해 도메인 네임 스페이스의 트리구조에 대한 정보가 필요한데, 이 정보를 가진 서버 도메인 이름을 IP주소로 변환하는 것을 네임 서비스

3. 리졸버(Resolver)
  - DNS클라이언트의 요청을 네임 서버로 전달하고 네임 서버로부터 도메인이름과 IP 주소를 받아 클라이언트에게 제공하는 기능을 수행


### 도메인 동작 순서
1. 웹 브라우저에 www.naver.com을 입력하면 먼저 PC에 저장된 Local DNS(기지국 DNS 서버)에게 "www.naver.com"이라는 hostname"에 대한 IP 주소를 요청한다.

> Local DNS(기지국 DNS 서버) 란?
> 기본적으로 인터넷을 사용하기 위해선 IP를 할당해주는 통신사(KT, SK, LG 등...)에 등록하게 된다.
> 컴퓨터의 LAN선을 통해 인터넷이 연결되면, 가입했던 각 통신사의 기지국 DNS 서버가 등록되게 된다.
> 그러니까 KT를 사용하는 집이면 KT DNS가 되고, SK통신사 사용하는 집이면 SK DNS가 자동으로 셋팅 된다.
> Local DNS 에는 "www.naver.com 의 IP 주소"가 있을 수도 없을 수도 있다. (본 설명에서는 Local DNS에 "www.naver.com 의 IP 주소"가 없다고 가정 한다.)

  - 만일 예전에 네이버에 접속했던 전적이 있다면, Local DNS에 접속정보가 캐싱이 되어있어, 바로 PC에 IP 주소를 주고 끝난다. (바로 1번 → 8번으로 넘어가 빠르게 웹페이지에 접속할수 있다)

2. 그러면 Local DNS는 이제 "www.naver.com 의 IP 주소"를 찾아내기 위해 다른 DNS 서버들과 통신(DNS 쿼리)을 시작한다.
먼저 Root DNS 서버에게 "www.naver.com 의 IP 주소"를 요청한다.

> Root DNS(루트 네임서버) 란?
> Root DNS는 인터넷의 도메인 네임 시스템의 루트 존이다.
> ICANN이 직접 관리하는 절대 존엄 서버로, TLD DNS 서버 IP들을 저장해두고 안내하는 역할을 한다.
> 전세계에 961개의 루트 DNS가 운영되고 있다.

3. Root DNS 서버 는 "www.naver.com 의 IP 주소" 를 찾을 수 없어 Local DNS 서버에게 "www.naver.com 의 IP 주소 찾을 수 없다고 다른 DNS 서버에게 물어봐" 라고 응답을 한다.

4. 이제 Local DNS 서버는 com 도메인을 관리하는 TLD DNS 서버(최상위 도메인 서버)에 다시 www.naver.com에 대한 IP 주소를 요청한다.

> TLD(Top-Level Domain, 최상위 도메인) DNS Server 란?
> TLD는 도메인 등록 기관(Registry)이 관리하는 서버로, 도메인 네미의 가장 마지막 부분을 말한다.
> 예를들어 웹사이트에서 한번쯤은 봐왔던 .com 이나 co.kr 같은 도메인들을 관리하고 부여하는 서버이다.
> Authoritative DNS 서버 주소를 저장해두고 안내하는 역할을 한다. (밑에서 배움)

5. com 도메인을 관리하는 DNS 서버에도 해당 정보가 없으면, Local DNS 서버에게 "www.naver.com 의 IP 주소 찾을 수 없음. 다른 DNS 서버에게 물어봐" 라고 응답을 한다.

6. 이제 Local DNS 서버는 naver.com DNS 서버(Authoritative DNS 서버)에게 다시 "www.naver.com 의 IP 주소" 를 요청한다.

> Authoritative DNS Server 란?

> 실제 개인 도메인과 IP 주소의 관계가 기록/저장/변경되는 서버.
> 그래서 권한의 의미인 Authoritative가 붙는다.
> 일반적으로 도메인/호스팅 업체의 ‘네임서버’를 말하지만, 개인이나 회사 DNS 서버 구축을 한 경우에도 여기에 해당하게 된다.

7. naver.com DNS 서버 에는 "www.naver.com 의 IP 주소" 가 있다.
그래서 Local DNS 서버에게 "www.naver.com에 대한 IP 주소는 222.122.195.6" 라는 응답을 한다.

8. 이를 수신한 Local DNS는 www.naver.com 의 IP 주소를 캐싱을 하고 이후 다른 요청이 있을시 응답할 수 있도록 IP 주소 정보를 단말(PC)에 전달해 준다.

> 이렇게 Local DNS 서버가 여러 DNS 서버에 차례대로 (Root DNS 서버 → TLD DNS 서버(.com) → Authoritative DNS 서버(naver.com) 요청하여 그 답을 찾는 과정을 재귀적 쿼리 Recursive Query 라고 부른다.

### 동작 요약
1. Host가 Root에 IP를 물어봄
2. com으로 끝나니까, com을 전담하는 DNS server를 알려줌
3. example.com을 전담하는 DNS server를 알려줌
4. Sub domain DNS server를 알려줌
5. 해당 Domain에 대한 IP 주소를 Host에게 보냄 
6. IP 주소 get!

### DNS 서버 종류

- Local DNS 서버
- Root DNS 서버
  - root DNS는 최상위 DNS서버로 해당 DNS부터 시작해서 아래 딸린 노드 DNS서버에게 차례차례 물어보는 트리 구조로 짜여있습니다.

  - 모든 DNS서버들은 Root DNS 주소를 가지고 있고, 모르는 Domain name이 요청되면 가장 먼저 Root DNS에 물어보는것입니다.

  - 하지만 Root DNS에 없다면, TLD(최상위 도메인) 서버에 물어본다.

- TLD(Top-Level Domain)
  - 종류에 따라 gTLD, New gTLD, ccTLD

- Second-level DNS 서버 (2차 도메인)

- Sub DNS 서버 (최하위 서버)
  - www. dev. mail. cafe. 등등 을 구분하는 최하위 서버를 말한다

### 도메인 등록

- 도메인을 호스팅 서비스에서 구매하면 도메인을 생성합니다.

- 클라우드(AWS LightSail의 네트워크 탭)에 도메인 영역을 생성하고 등록해줍니다.

- 도메인 영역을 등록하면 사용가능한 네임서버를 확인할 수 있습니다.

- 도메인 호스팅 사이트에 가서 해당 도메인에 네임서버를 등록해줍니다.

- `네트워킹`탭에 도메인 이름을 선택하고, 레코드 추가 버튼을 눌러 연결하고자 하는 주소의 이름을 입력합니다.(고정아이피 이름) 

- 저장하면 도메인 이름을 브라우저에 도메인 이름을 치면 접속됩니다.


### 도메인 등록 이모저모

- 클라우드 하는곳에서 안해도 싼곳에서 그냥 해도됨.
- cafe24, 가비아, 포크번, 네임칩, 호스팅케이알
- 도메인주소가 완전히 세팅된 이후에 HTTPS도 적용할 수 있습니다.


## 강추 도구 : cloudflare

- 파일캐시를 사용하면서 빠르게 응답을 주면서 서버에 로드를 줄여주는것.?
- 많이 쓰게 된 이유 
  1. 보안적으로 뛰어남.
  2. 무료. 

- 다른데서 구매한 도메인을 넘겨서 네임서버 관리하도록 하고(cloudflare에서 직접 구매하기도 합니다.) 
- 우리 서버에 접근하기 전에 cloud flare로 접근하게 만들어놓아서 트래픽이 쏟아질때 캐시를 생성하두고 처리하고, 반복된 요청도 쉽게 처리할수있습니다. 그러므로 ddos 공격 방어도 할수있습니다.