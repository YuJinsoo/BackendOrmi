## 클라우드 서비스

- 이전에는 NAC장비를 이용해서 개인서버를 운용한다던가, pc나 노트북을 이용해서 개인 서버를 운용하는 사람들도 있었습니다.
- 하지만 직접 서버를 운용하는 것은 매우 난이도가 있는 일이고 관리해야할 사항이 많습니다.
- 클라우드 서비스를 이용하면 서버, db, 리소스 등 여러가지 관리대상을 일목요연하게 모니터링하고 다양한 서비스를 결합해 원하는 서비스를 운용할 수 있습니다.

### 용어
- idc : Internet Data Center
- 서버 호스팅 : 서버를 가지고 있는 회사에 서버를 빌려서 사용함.
- 가상 서버 : 가상 머신(VM ware, Virtual box) 기술들이 발명되면서 등장 가상 머신을 이용해서 서버를 생성한 기술입니다.

### 역사

- 가상 서버기술을 이용해서 가상 서버를 대여해주는 사업이 등장했고, 클라우드라는 개념이 생기고 아마존이 등장했습니다. (클라우드 개념은 google에서 만들었음)

- 클라우드 서비스란 원격의 컴퓨터 리소스를 빌리는 것입니다. 
- 클라우드 서비스를 지원한는 업체에서 수많은 서버를 구축(idc)해두고, 거기에 가상머신으로 가상 서버를 설정해서 임대하는 서비스입니다.

### 종류
- 메이저: AWS, Azure, GCP(구글 클라우드), IBM cloud, 오라클, 네이버클라우드
- 혼자서 소규모로 할 때에는 Digital Ocean, Vultr, Linode 이런 중소형 서비스도 고려할만한 대상이 됩니다.

- chat gpt api는 weniv에서 제공한건데.. **cloud flare** 도 고려해볼 만한 옵션

### AWS의 기본 개념 및 이해

AWS는 다음과 같은 주요 개념과 용어를 갖고 있습니다:

1. 리전 (Region): 
  AWS는 전 세계에 여러 개의 리전을 운영합니다. 
  각 리전은 독립된 데이터 센터 그룹으로 구성되어 있으며, 특정 지리적 위치에 배치되어 있습니다. 예를 들어, 미국 동부, 유럽, 아시아 태평양 등이 리전의 예입니다.

2. 가용 영역 (Availability Zone): 
  리전은 하나 이상의 가용 영역으로 구성됩니다. 가용 영역은 독립된 데이터 센터로 구성되어 있으며, 고가용성과 내결함성을 제공하기 위해 상호 연결됩니다.

3. 인스턴스 (Instance): 
  가상 컴퓨팅 환경을 의미하며, AWS에서는 Amazon Elastic Compute Cloud (EC2)를 통해 인스턴스를 제공합니다. 인스턴스는 가상 서버로, 다양한 운영 체제와 애플리케이션을 실행할 수 있습니다.

4. S3 (Simple Storage Service): 
  S3는 객체 스토리지 서비스로, 파일이나 데이터를 안전하게 저장하고 검색할 수 있습니다. 이는 웹 사이트 호스팅, 백업 및 복구, 데이터 아카이브 등에 사용됩니다.
  가상화 서버는 쉽게 생성/삭제가 되다 보니까 보다 안전하게 정보를 저장할 서비스가 필요했고, 그것이 바로 S3으로 구현되었습니다.

5. RDS (Relational Database Service): 
  RDS는 관계형 데이터베이스 서비스로, MySQL, PostgreSQL, Oracle, SQL Server 등 다양한 데이터베이스 엔진을 제공합니다. 사용자는 서버 관리 없이 데이터베이스를 쉽게 설정, 운영 및 확장할 수 있습니다.
  
6. Lambda: 
  Lambda는 서버리스 컴퓨팅 서비스로, 코드를 실행할 수 있는 컴퓨팅 리소스를 제공합니다. 사용자는 코드를 업로드하고 이벤트에 대한 응답으로 실행될 수 있도록 구성할 수 있습니다. 어떤 이벤트가 발생했을 때, 코드 기반를 잠깐 실행할 수 있는 리소스를 빌렸다가 사용 후 바로 반납합니다.

7. VPC (Virtual Private Cloud): 
  VPC는 가상 사설 네트워크로, 사용자의 AWS 리소스를 구성하고 격리된 네트워크 환경을 생성할 수 있습니다. (공인ip, 사설ip)
  

## AWS 주요 서비스

- 참조 사이트 : https://www.hanl.tech/blog/helpful-9-amazon-web-services-for-developers/

1. 컴퓨팅
  - Amazon EC2 (Elastic Compute Cloud)
    - 가상 서버를 제공합니다.
    - 애플리케이션을 호스팅하고, 서버의 운영 체제와 애플리케이션 실행 환경을 완전히 제어할 수 있습니다.
    - **EC2는 더 많은 제어력과 사용자 정의 가능성이 필요한 경우 유용**

  - AWS Lambda
    - 서버리스 컴퓨팅을 가능하게 합니다.
    - 이는 애플리케이션을 실행하는 데 필요한 서버의 프로비저닝이나 관리를 걱정할 필요 없이 코드를 실행할 수 있다는 의미입니다.
    - 사용자는 간단하게 코드를 작성하고 Lambda에 업로드만 하면 Lambda는 코드를 자동으로 실행하며, 사용자가 요청한 대로 컴퓨팅 리소스를 할당하고 조정합니다.
    - **Lambda는 서버 관리를 최소화하고 빠르게 확장할 필요가 있는 경우에 이상적**

2. 스토리지
  - Amazon S3 (Simple Storage Service)
    - 개발자에게 웹에서 데이터를 저장하고 검색하는 데 필요한 모든 기능을 제공합니다.
    - 확장성, 데이터 가용성, 보안 및 성능이 뛰어납니다.

  - Amazon EBS (Elastic Block Store)
    - EC2 인스턴스에 사용할 수 있는 블록 스토리지 시스템입니다.
    - 한 번에 한 개의 인스턴스에 연결할 수 있습니다.
    - 데이터베이스 워크로드 같은 트랜잭션 인텐시브 워크로드에 적합하며, 빠른 접근 속도와 낮은 지연 시간을 요구하는 애플리케이션에 특히 유용

  - Amazon Glacier 
    - 장기간 및 저렴한 비용의 데이터 아카이빙을 목적으로 설계된 스토리지 서비스입니다.
    - S3에 비애 요금이 많이 저렴하고 속도가 느림. 그래서 백업 용도로 많이 사용합니다.

3. 데이터베이스
  - Amazon RDS
    - 관계형 데이터베이스를 쉽게 설정, 운영 및 확장할 수 있는 웹 서비스입니다. 
    - MySQL, PostgreSQL, MariaDB, Oracle, SQL Server, Aurora
    - 자동 백업, 데이터베이스 스냅샷, 자동 호스트 교체, 복제를 통한 읽기 트래픽 증가 등의 기능을 제공하여 데이터베이스의 내구성과 가용성을 높입니다.

  - Amazon DynamoDB
    - 서버리스 NoSQL 데이터베이스 서비스로, 마이크로초 단위의 지연 시간으로 모든 규모의 애플리케이션에서 고성능 읽기 및 쓰기 작업을 제공합니다.
    - DynamoDB는 엄격한 일관성을 보장하며, 초당 수백만 개의 요청을 처리할 수 있습니다. 또한 이 서비스는 데이터를 자동으로 3개의 가용 영역에 복제하여 높은 가용성과 내구성을 제공합니다.

4. 네트워킹 & 콘텐츠 전송 (예: VPC, Route 53)
  - Amazon Virtual Private Cloud (VPC)
    - AWS 클라우드에서 논리적으로 격리된 공간을 정의하고 사용할 수 있게 해주는 서비스입니다.
    - VPC를 통해 사용자는 IP 주소 범위를 선택하고, 서브넷을 생성하고, 라우팅 테이블과 네트워크 게이트웨이를 구성할 수 있습니다.

  - Amazon Route 53 
    - 이는 확장성이 높고 비용 효율적인 도메인 이름 시스템(DNS) 웹 서비스입니다.
    - Route 53은 또한 AWS 서비스와의 효율적인 통합을 통해 개발자가 AWS 리소스를 손쉽게 라우팅할 수 있게 해줍니다.

5. 개발자 도구 (예: CodeStar, Cloud9)
  - AWS CodeStar
    - AWS에서 애플리케이션을 빠르게 개발, 빌드 및 배포할 수 있도록 도와주는 서비스입니다.
    - 다양한 프로그래밍 언어와 프레임워크, AWS 서비스를 지원하며, 빠른 세팅을 통해 시간을 절약할 수 있습니다.

  - AWS Cloud9
    - 웹 브라우저를 통해 코드를 작성, 실행, 디버깅할 수 있는 클라우드 기반의 통합 개발 환경(IDE)입니다.

  - AWS는 아니지만 추천
    - github code space

6. 관리 및 관리자 도구
  - AWS CloudWatch : 알림을 발생 시키는것까지..
    - 대시보드: 사용자는 CloudWatch 대시보드를 사용하여 AWS 리소스의 성능과 운영 상태를 시각적으로 모니터링할 수 있습니다.
    - 로그: 로그 파일을 수집하고 저장하여 특정 시스템이나 애플리케이션의 작동 방식을 분석할 수 있습니다.
    - 이벤트: AWS 리소스의 상태 변경을 자동으로 응답하도록 설정할 수 있습니다.
    - 알람: 특정 지표가 설정한 임계치를 초과하면 알람을 발생시킵니다. 이를 통해 빠른 대응이 가능해집니다.

  - AWS CloudFormation : 
    - 스택 관리: CloudFormation을 사용하면, 관련 AWS 리소스 그룹 (스택)을 한 번에 생성, 업데이트, 삭제할 수 있습니다. 이를 통해 리소스의 일관성과 관리 편의성이 향상됩니다.
    - 템플릿: AWS 리소스를 코드로서 관리할 수 있도록 템플릿을 제공합니다. 이를 통해 인프라 구조를 버전 관리하고 재사용할 수 있습니다.
    - 변경 세트: 변경 세트를 사용하면 스택 변경을 미리 미리 보고 이해할 수 있습니다. 이는 실수를 줄이는 데 도움이 됩니다.

## AWS 요금 구조

- 개인 프로젝트에서는 크게 영향이 없을 수 있지만, 회사다니면서는 필수적으로 챙겨야하는 부분입니다.

1. 페이-애즈-유-고(Pay-As-You-Go)
  - 고정 비용이나 예비 비용이 없으며, 필요한 서비스를 원하는 만큼 사용할 수 있게 해줍니다.
  - 사용하지 않는 서비스에 대한 비용을 줄일 수 있게 돕습니다.

2. 온디맨드(On-Demand)
  - 사용자가 필요한 시간동안 서비스를 이용하고 비용을 지불합니다. 이 방식은 장기적인 약정이나 upfront payment가 필요하지 않습니다.
  - 웹사이트의 트래픽이 일정하지 않은 스타트업, 개발 및 테스트 환경 등에서 사용됩니다.

3. 저축 계획(Savings Plans)
  - 일정 기간 동안 특정 용량의 AWS 리소스 사용을 약속하는 대신, 저렴한 요금을 제공하는 "저축 계획"을 제공합니다. (월별, 연간 또는 3년 단위)
  - 꾸준히 AWS 서비스를 사용할 예정이라는 것을 알고 있는 경우에 적합합니다

4. 리저브드 인스턴스(Reserved Instances)
  - 특정 기간 동안 사용할 AWS 서비스(메모리, 용량 등)를 사전에 예약하면, 대폭 할인된 비용을 제공합니다. 이는 보통 1년 또는 3년 단위로 제공됩니다.
  - 예측 가능한 워크로드를 가진 경우에 적합합니다.

5. 스팟 인스턴스(Spot Instances)
  - AWS의 미사용 서버 용량을 입찰 방식으로 구매하는 방식입니다. 
  - 24시간 서비스 말고 배치 작업, 백업작업, 잠깐 쓰는 용도로 쓰면 굉장히 저렴하게 사용할 수 있다.


## MFA 반드시 등록하기

- MFA 는 multi factor authencication
- 사용자가 적어도 두 가지 이상의 확인 요소로 인증하는 것입니다.
- 아이디-패스워드 이외에 다른 인증 절차를 추가한것을 의미합니다.

- OTP와 비슷합니다.
- 저는 `Authy` 라는 앱을 사용했습니다.



### EC2 생성하고 접속해보기

- EC2 를 생성하고 인스턴스를 눌러서 접속해봅니다.

- 연결 들어가면 '인스턴스연결' 있는데 이건 별도 프로그램 없이 웹에서 서버에 접속할 수 있게 해주는 서비스입니다.
- 접속하면 터미널 창이 나오는데 이게 서버에 접속된 것입니다.
- 아래쪽에 인스턴스 id와 함께 ip2개가 나오는데,
  - PublicIPs: 13.125.193.165    PrivateIPs: 172.31.8.254
- 이렇게 나오는데 이게 이 서버의 공인ip와 사설 ip입니다.

pwd : 현재경로
cat /etc/issue : Ubuntu 22.04.2 LTS \n \l 출력됨.

- 이후 수업에서는 SSH로 접속해서 사용할 것입니다.
- 대부분 linux는 ssh서버가 돌아가고 있는데, 일너 점을 이용해서 ssh client를 이용해서 서버에 접속하도록 하겠습니다.


## 공인ip, 사설ip


- ip: 인터넷에 연결된 각 기기를 구분하기 위해 사용되는 고유한 주소를 말합니다. 

- 공인 IP는 전 세계적으로 유일하게 할당되며, 이는 인터넷 상에서 고유한 아이덴티티를 부여하여 특정 기기와 통신을 가능하게 합니다.

- 사설 IP는 로컬 네트워크 내에서만 사용될 수 있는 주소입니다. 이 주소는 전 세계적으로 유일할 필요가 없으며, 로컬 네트워크 내에서만 유일하면 됩니다.

1. **공인 IP는 아파트 단지의 주소**와 같습니다. 이 주소는 전국 어디에서나 그 위치를 찾을 수 있도록 도와주며, 택배가 올 때나 방문객이 찾아올 때 아파트 단지를 찾을 수 있는 유일한 정보입니다.

2. 반면에, **사설 IP는 아파트 단지 안의 개별 아파트 호수**와 같습니다. 이 호수는 아파트 단지 내에서만 의미가 있으며, 단지 밖에서는 그 위치를 알 수 없습니다. 그러나 한번 아파트 단지 내에 들어오면, 각 아파트 호수를 통해 특정 집을 찾아갈 수 있습니다.

- 공인 IP를 사용하는 것이 필요한 예로는 웹 서버나 이메일 서버와 같은 인터넷에 직접 연결되어야 하는 서버, 또는 원격에서 접근이 필요한 기기 등이 있습니다. 
- 하지만 공인 IP 주소는 한정된 자원이기 때문에, 모든 기기가 공인 IP를 가질 수는 없습니다.

- 사설 IP 대역
  - 클래스 A: 10.0.0.0~10.255.255.255
  - 클래스 B: 172.16.0.0~172.31.255.255
  - 클래스 C: 192.168.0.0~192.168.255.255

- 공인ip (퍼블릭ipv4 주소) :
서버를 껏다 키면 변경됩니다. 고정된 주소가 아닙니다.

### SSH Client 설치 및 접속 설정

- Tabby, putty, xshell?, iterm2 등등있음. 개인취향
- 수업에서는 Tabby 사용하겠읍니다.

- aws에서 서버 생성 시 다운받은 .pem 파일을 홈디렉토리의 .ssh 폴더 안에다가 복사합니다. (사실상관없는거같기도하고....)

- ssh연결로 프로필 생성
  - 공인ip주소 입력
  - ubuntu os 특징인거같은데, 사용자이름은 ubuntu로 
  - key 파일등록 하면 연결할 수 있습니다.


# LightSail

- 저렴하고 간편하게 서버, db, 네트워크 등을 작업할 수 있는 AWS 서비스입니다.

## 인스턴스 생성하기

- 인스턴스 생성하기 버튼을 누르고 원하는 세팅을 선택합니다.

- 해당 인스턴스에 대한 SSH key 를 추가하고 다운로드 받은 후, 잘 관리합니다. (한 번만 다운로드 받을 수 있음. SSH 연결에 필요함)



### Linux에 Wordpress 사용해서 만들어보기


### 버스트?
- 인스턴스 생성 후 `지표` 탭에 가면 사용한 리소스 지표들을 확인할 수 있습니다.

- 버스트 용량 제한. 0%되는순간 추가 과금
- 버스트는 10% 이상일때 소모됨


### 접속하기

- 공개ip 입력해서 접속. 근데 https 말고http로해야함
  - http://공개아이피
  - 관리자 페이지는 ~~/wp-admin

- 관리자 아이디 비밀번호 지정한적 없기 때문에 확인필요
  - 인스턴스 가서 `SSH를 사용하여연결` 을 클릭하고 ls로 확인해봅시다.
  - bitnami_credentials 파일에 저장되어있으니까 열어서 확인
  - user / IbZw6fJIinE!

- 리눅스 버전확인 `/etc/issue`?

- Tabby로 ssh 연결..
  - 홈디렉토리에서 /stack/wordpress
  - 경로에 워드프레스 관련 파일들 있음

- 중지하거나 재부팅하면.. public ip가 꼐속 바뀜. ㅠㅠ
  - public ip를 고정할 수 있음.
  - 네트워킹 메뉴에 고정 IP연결 버튼이 있음.
  - IP를 고정적으로 할당받고 이 IP에 내 인스턴스를 연결하는 개념.
  - 다른 인스턴스를 연결할 수 있습니다.
  - 고정ip는 추가 요금 없이 5개까지 가능합니다.


### LAMP 로 GNU보드
- linux apache mysql php 설정한거 > LAMP 라고 합니다.

- gnuboard
  - k-게시판
  - 500만원 이하 홈페이지를 만드는 웹 에이전시들에서 압도적인 점유율
  - 홈페이지도 만들 수 있음

- 홈 디렉토리에 /htdocs 경로에 index.html
- bitnami_credentials 에 비밀번호 있음 (9Kwkw2soH4f=)

- 기본 설치되어있는 mysql 접속하기
  - mysql -u root -p
  - 비밀번호는 위에서 확인한 것 넣기


### 동작 요약
1. Host가 Root에 IP를 물어봄
2. com으로 끝나니까, com을 전담하는 DNS server를 알려줌
3. example.com을 전담하는 DNS server를 알려줌
4. Sub domain DNS server를 알려줌
5. 해당 Domain에 대한 IP 주소를 Host에게 보냄 
6. IP 주소 get!

### 도메인 등록

- 도메인을 호스팅 서비스에서 구매하면 도메인을 생성합니다. 호스팅 업체에서 자동으로 네임서버를 제공합니다. 하지만, AWS랑 연결하기 위해서는 네임서버를 AWS에서 도메인 영역을 생성했을 때 알려주는 것으로 다시 등록해야 합니다.

- 클라우드(AWS LightSail의 네트워크 탭)에 도메인 영역을 생성하고 등록해줍니다.

- 도메인 영역을 등록하면 사용가능한 네임서버를 확인할 수 있습니다.

- 도메인 호스팅 사이트에 가서 해당 도메인에 네임서버를 등록해줍니다.

- `네트워킹`탭에 도메인 이름을 선택하고, 레코드 추가 버튼을 눌러 연결하고자 하는 주소의 이름을 입력합니다.(고정아이피 이름) 

- 저장하면 도메인 이름을 브라우저에 도메인 이름을 치면 접속됩니다.


### 도메인 등록 이모저모

- 클라우드 하는곳에서 안해도 싼곳에서 그냥 해도됨.
- cafe24, 가비아, 포크번, 네임칩, 호스팅케이알
- 도메인주소가 완전히 세팅된 이후에 HTTPS도 적용할 수 있습니다.


## 강추 도구 : cloudflare

- 파일캐시를 사용하면서 빠르게 응답을 주면서 서버에 로드를 줄여주는것.?
- 많이 쓰게 된 이유 
  1. 보안적으로 뛰어남.
  2. 무료. 

- 다른데서 구매한 도메인을 넘겨서 네임서버 관리하도록 하고(cloudflare에서 직접 구매하기도 합니다.) 
- 우리 서버에 접근하기 전에 cloud flare로 접근하게 만들어놓아서 트래픽이 쏟아질때 캐시를 생성하두고 처리하고, 반복된 요청도 쉽게 처리할수있습니다. 그러므로 ddos 공격 방어도 할수있습니다.



### 도메인 레코드 추가

- A 레코드 : 주소 레코드
  - 도메인이나 하위 도메인을 웹서버 또는 인스턴스의 IP 주소로 매핑합니다.
  - 한번의 요청으로 찾아갈 서버의 IP 주소를 한번에 알 수 있어서 빠릅니다.
  - IP 주소가 자주 바뀌는 환경에서는 조금 번거로울 수 있습니다.

- CNAME 레코드 : 정식이름 레코드
  - 별칭 또는 하위 도메인(www.exmaple.com)을 다른 도메인(exmaple.com)이나 다른 하위 도메인에 매핑합니다.
  - IP 주소가 자주 변경되는 환경에서 유연하게 대응할 수 있습니다.
  - 상위도메인을 가지는 곳에 요청을 한번 거치므로 성능 저하가 있을 수 있습니다.
  - 로드밸런서를 추가했을 때, 상위 도메인으로 등록하면 (예: lb.gnuboard.com) 을 쉽게 로드밸런서를 통해 접속할 수 있습니다.
  
- NS 레코드 : name server 레코드
  - 도메인에 대한 네임서버의 권한을 누가 관리하고 있는지 알려주는 레코드입니다.
  - 즉 어떤 도메인에 대한 처리를 다른 도메인 네임 서버에기 위함하는 기능을 가진 레코드입니다.

- 참조 : https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-DNS-%EB%A0%88%EC%BD%94%EB%93%9C-%EC%A2%85%EB%A5%98-%E2%98%85-%EC%95%8C%EA%B8%B0-%EC%89%BD%EA%B2%8C-%EC%A0%95%EB%A6%AC#ns_name_server


### 스냅샷

- 스냅샷은 인스턴스, 데이터베이스, 블록 스토리지 디스크의 특정 시점 스냅샷을 생성하고 이를 기준으로 사용하여 새 리소스를 생성하거나 데이터를 백업할 수 있습니다.

- 스냅샷으로 설정된 서버를 상태를 복사해서 가지고있고, 이걸로 인스턴스를 만들 수있습니다.

- 똑같은 환경의 서버를 만들 수 있습니다.

- 스냅샷으로 똑같이 만들어봅니다.


### 로드밸런서

- 서버가 여러 대 있을 때 요청이 더 원활하게 처리될 수 있는 곳(현재 처리량이 더 여유로운 인스턴스) 로 요청을 분배하는 역할을 합니다.

- 만들어둔 인스턴스를 대상 인스턴스로 연결합니다.
- `DNS 이름`으로 되어있는 주소를 입력하면 연결된 서버로 이동합니다.
- 인스턴스를 중지시키면 그 주소로는 안보냄.
- 다시 실행시키면 자동으로 동작합니다.
- 인스턴스 ip를 참조하기 때문에 고정ip가 아니어도 괜찮습니다.


### HTTPS 인증?
- 원래 서버마다 인증서를 가지고 있어야 했습니다.
- 로드밸런서에 인증서를 세팅하면 외부와 로드벨런서는 인증된 방식으로 통신하고, 각 인스턴스 서버와 로드밸런서는 인증 안해도 통신 가능합니다.


# 세션 지속성
- 로드밸런스로 처리했을 때 서버가 여러개니까 세션이 어디에 생겼는지 모름.
- 그래서 세션 지속성을 on 시켜주면 어떤 user가 다음 요청이 왔을 때 그 user의 세션이 생긴 서버로 보내줍니다.


### Django 기반 Todolist 서버 만들기

- 다른 인스턴스로 서버를 만들듯이 고정ip 설정 해줍니다.

- 파이썬 기반 프로젝트를 받으면 해당 프로젝트의 패키지 목록인 `requirements.txt`를 통해 한번에 설정할 수 있습니다.
```bash
pip install -r requirements.txt
```

- 장고 앱을 실행하기 위해 데이터베이스를 적용 해줍니다. 이 명령어는 나중에 다른 db를 설정한 후에도 실행해야 합니다.
```bash
python manage.py migrate
```

- 8000번 포트로 서버를 실행합니다.
```bash
python manage.py runserver 0.0.0.0:8000
```
- 새로운 포트로 접속하기 위해서는 인스턴스의 네트워크 메뉴에서 해당 포트를 추가해줍니다.


- 외부 DB 프로그램인 postgreSQL 서버를 생성하고, 여기에 쟝고 앱을 연결해보겠습니다.

- postrgresql연결할때 쓰는 패키지를 설치합니다.
```bash
pip install psycopg2-binary
```

> 데이터베이스 생성 (시간이 오래걸립니다.)
  - 기본적으로 생성하면 private로 생성됩니다.
  
  - 데이터베이스 public, private 설정할 수 있습니다.
  
  - 퍼블릭 네트워크로 통신하냐, private로 서버와 통신하냐 에 속도가 갈리기도합니다.
  
  - 데이터베이스 이름, 사용자, 비밀번호를 설정합니다.

- Django app의 settings.py에 DB부분을 아래와 같이 설정합니다.
  - HOST는 데이터베이스 서버 의 주소
  - PORT는 postgre의 기본포트 5432
  - Enginne도 postgre로 설정

```python
# settings.py
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'dbmaster', 
        'USER': 'dbmaster', 
        'PASSWORD': 'dbmaster!!', 
        'HOST': 'ls-0f7eef7b69eeb0dcb544d247bd58edad11df72c6.cpom57ol7nkm.ap-northeast-2.rds.amazonaws.com', 
        'PORT': '5432', 
    }
}
```

- 이후 장고 앱을 실행하기 전에 db를 적용해줍니다.
```bash
python manage.py migrate
```

- 앱실행을 확이해봅니다.


### 버킷 생성

- S3와 같은 서비스라고 생각하면 됩니다.
- 기본적으로 private라서 외부에서 도메인 주소 치고 접속 불가능합니다.
- public으로 전환하면 도메인 / 경로 를 입력해서 파일을 열어볼 수있습니다.
- 이게 필요한 이유는
  - 유저가 업로드한 데이터들을  S3로 업로드하도록 함. 서버에 직접 접속하면 서버를 여러대 설치했을 때 못찾을 수 있기 때문.
  - 공개로도 많이 사용하는데 AWS_ACCESS_KEY_ID랑 AWS_ACCESS_SECRET_KEY 사용해서 업로드?


### tiptip

- 무료 툴 소개
https://free-for.dev/#/

- 긱뉴스. 최신 정보
https://news.hada.io/
