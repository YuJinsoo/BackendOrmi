{% extends 'blog/base.html' %}

{% block content %}
<hr>
<h2>제목: {{ post.title }} </h2>
<hr>
<a href="{% url 'blog:edit' pk=post.pk%}" class="btn btn-primary">수정</a>
<form action="{% url 'blog:delete' pk=post.pk%}" method="post" style="display:inline-block">
    {% csrf_token %}
    <input type="submit" value="삭제" class="btn btn-danger">
</form>

<p>내용: {{ post.content }}</p>
<p>작성자: {{ post.writer }}</p>
<p>작성일: {{ post.created_at }}</p>
<p>수정일: {{ post.updated_at }}</p>

<hr>
<h3>해시태그</h3>
<form action="{% url 'blog:tag-write' post_id=post.pk%}" method="post">
    {% csrf_token %}
    {{ hashtag_form.name }}
    <input type="submit" class="btn btn-dark" value="태그생성">
</form>
{% if hashtags %}
<ul>
    {% for hashtag in hashtags %}
    <li>{{ hashtag }}
        <form action="{% url 'blog:tag-delete' tag_id=hashtag.pk %}" method="post" style="display:inline-block">
            {% csrf_token %}
            <input type="submit" value="X" class="btn btn-danger">
        </form>
    </li>
    {% endfor %}
</ul>
{% else %}
<p>태그가 없습니다.</p>
{% endif %}

<hr>
<h3>댓글 작성</h3>
<form action="{% url 'blog:cm-write' post_id=post.pk %}" method="post">
    {% csrf_token %}
    <!-- {{ form.content.label_tag }} -->
    {{ comment_form.content }}
    <input type="submit" class="btn btn-dark" value="댓글작성">
</form>

<hr>
<h3>댓글 목록</h3>
{% if comments %}
    <ul> 
        {% for comment in comments %}
        <!-- <p>{{ comment }}</p> -->
            <li>{{ comment.content }} -작성자: {{ comment.writer }} /시간: {{ comment.created_at }}
                <form action="{% url 'blog:cm-delete' pk=comment.pk %}" method="post">
                    {% csrf_token %}
                    <input type="submit" class="btn btn-warning" value="X">
                </form>
            </li>

        {% endfor %}
            
    </ul>
{% else %}
    <p>작성된 댓글이 없습니다.</p>
{% endif %}

{% endblock %}